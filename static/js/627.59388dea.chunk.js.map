{"version":3,"file":"static/js/627.59388dea.chunk.js","mappings":"oOA8GA,QArGA,WACE,MAAMA,GAAWC,EAAAA,EAAAA,OACX,MAAEC,IAAUC,EAAAA,EAAAA,YAAWC,EAAAA,IAEtBC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,CAC/BC,MAAO,GACPC,SAAU,MAGLC,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAkC7BK,EAAUC,IACdP,GAAOQ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIT,GAAI,IAAE,CAACQ,EAAEE,OAAOC,IAAKH,EAAEE,OAAOE,QAAQ,EAGrD,OACEC,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAAC,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWF,UACxBC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,oBAGNC,EAAAA,EAAAA,KAAA,QAAME,SA1CKC,UACbX,EAAEY,iBACFd,EAAS,MAET,IACE,MAAMe,QAAYC,EAAAA,EAAMC,KAAK,GAADC,OAlBZC,8BAkBsB,2BACpC,CACEtB,MAAOH,EAAKG,MACZC,SAAUJ,EAAKI,UAEjB,CACEsB,QAAS,CACP,eAAgB,mBAChBC,OAAQ,sBAKVN,EAAIrB,KAAK4B,OAEX/B,EAAMwB,EAAIrB,MAGVL,EAAS,iBAETW,EAAS,0BAEb,CAAE,MAAOuB,GACPvB,EAAS,0BACX,GAayBS,UACrBF,EAAAA,EAAAA,MAACiB,EAAAA,EAAKC,MAAK,CAACd,UAAU,OAAMF,SAAA,EAC1BC,EAAAA,EAAAA,KAACc,EAAAA,EAAKE,MAAK,CAACC,QAAQ,QAAOlB,SAAC,WAC5BC,EAAAA,EAAAA,KAACc,EAAAA,EAAKI,QAAO,CACXjB,UAAU,QACVN,GAAG,QACHwB,KAAK,QACLvB,MAAOZ,EAAKG,MACZiC,SAAU7B,EACV8B,UAAW,GACXC,UAAQ,KAGVtB,EAAAA,EAAAA,KAACc,EAAAA,EAAKE,MAAK,CAACC,QAAQ,WAAUlB,SAAC,kBAC/BC,EAAAA,EAAAA,KAACc,EAAAA,EAAKI,QAAO,CACXjB,UAAU,QACVN,GAAG,WACHwB,KAAK,WACLvB,MAAOZ,EAAKI,SACZgC,SAAU7B,EACV8B,UAAW,GACXC,UAAQ,IAGTjC,IAASW,EAAAA,EAAAA,KAAA,OAAKuB,MAAO,CAAEC,MAAO,MAAOC,UAAW,QAAS1B,SAAEV,KAE5DW,EAAAA,EAAAA,KAAA,OAAKC,UAAU,eAAcF,UAC3BC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAM,CAACzB,UAAU,eAAekB,KAAK,SAASQ,QAAQ,YAAYC,KAAK,KAAI7B,SAAC,yBAOnFC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeF,UAC5BC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,iCAELC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBAAeF,UAC5BC,EAAAA,EAAAA,KAAC6B,EAAAA,GAAI,CAACC,GAAG,uBAAsB/B,UAC7BC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAM,CAAGzB,UAAU,iBAAiB0B,QAAQ,OAAOC,KAAK,KAAI7B,UAC3DC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,0BAMf,EChGA,QARA,WAEE,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,UAASF,UACtBC,EAAAA,EAAAA,KAAC+B,EAAS,KAGhB,C","sources":["Components/FormLogin.jsx","Pages/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport Axios from \"axios\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { AuthContext } from \"../Context/AuthContext\";\n\nexport const apiURL = process.env.REACT_APP_API_URL;\n\nfunction FormLogin() {\n  const navigate = useNavigate();\n  const { login } = useContext(AuthContext);\n\n  const [data, setData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const [error, setError] = useState(null);\n\n  const submit = async (e) => {\n    e.preventDefault();  // empêche le rechargement de la page \n    setError(null); // reset erreur à chaque tentative\n\n    try {\n      const res = await Axios.post(`${apiURL}/api/custom_login_check`,\n        { \n          email: data.email, \n          password: data.password \n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n          },\n        }\n      );      \n\n      if (res.data.token) {\n        // sauvegarde le token et les infos utilisateur dans le context\n        login(res.data);\n\n        // redirection vers la page d'accueil après login\n        navigate(\"/LiveEvents/\");\n      } else {\n        setError(\"Identifiants invalides.\");\n      }\n    } catch (err) {      \n      setError(\"Identifiants invalides.\");\n    }\n  };\n\n  const handle = (e) => {\n    setData({ ...data, [e.target.id]: e.target.value });\n  };\n\n  return (\n    <>\n      <div className=\"contacth1\">\n        <h1>Se connecter</h1>\n      </div>\n\n      <form onSubmit={submit}>\n        <Form.Group className=\"pb-5\">\n          <Form.Label htmlFor=\"email\">Email</Form.Label>\n          <Form.Control\n            className=\"field\"\n            id=\"email\"\n            type=\"email\"\n            value={data.email}\n            onChange={handle}\n            maxLength={40}\n            required\n          />\n\n          <Form.Label htmlFor=\"password\">Mot de passe</Form.Label>\n          <Form.Control\n            className=\"field\"\n            id=\"password\"\n            type=\"password\"\n            value={data.password}\n            onChange={handle}\n            maxLength={50}\n            required\n          />\n            {/* affichage message d'erreur si erreur */}\n          {error && <div style={{ color: \"red\", marginTop: \"10px\" }}>{error}</div>}\n\n          <div className=\"submitbutton\">\n            <Button className=\"boutonSubmit\" type=\"submit\" variant=\"secondary\" size=\"lg\">\n              Se connecter\n            </Button>\n          </div>\n        </Form.Group>\n      </form>\n\n      <div className=\"registerLink \">          \n        <p>Pas&nbsp;encore&nbsp;inscrit?</p>\n      </div>\n      <div className=\"registerLink \">\n        <Link to=\"/LiveEvents/Register\">\n          <Button   className=\"registerLinka \" variant=\"link\" size=\"lg\">                \n            <p>S'enregistrer</p>                  \n          </Button>\n        </Link>\n      </div>\n    </>\n  );\n}\n\nexport default FormLogin;\n","import React from 'react';\nimport FormLogin from \"../Components/FormLogin\"\n\n\nfunction Contact() {\n  \n  return (\n    <div className=\"contact\">\n      <FormLogin />\n    </div>\n  );\n}\nexport default Contact;"],"names":["navigate","useNavigate","login","useContext","AuthContext","data","setData","useState","email","password","error","setError","handle","e","_objectSpread","target","id","value","_jsxs","_Fragment","children","_jsx","className","onSubmit","async","preventDefault","res","Axios","post","concat","process","headers","Accept","token","err","Form","Group","Label","htmlFor","Control","type","onChange","maxLength","required","style","color","marginTop","Button","variant","size","Link","to","FormLogin"],"sourceRoot":""}